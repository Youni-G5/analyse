{% comment %}
  Snippet: Pagination
  Description: Composant de pagination accessible pour collections, blog, etc.
  
  Usage:
    {% render 'pagination', paginate: paginate %}
    {% render 'pagination', paginate: paginate, anchor: '#filters' %}
{% endcomment %}

{%- if paginate.parts.size > 0 -%}
  <nav class="pagination" role="navigation" aria-label="{{ 'general.pagination.label' | t }}">
    <ul class="pagination__list" role="list">
      {%- comment -%} Bouton Précédent {%- endcomment -%}
      {%- if paginate.previous -%}
        <li class="pagination__item">
          <a href="{{ paginate.previous.url }}{{ anchor }}" 
             class="pagination__link pagination__link--prev"
             aria-label="{{ 'general.pagination.previous' | t }}">
            <svg aria-hidden="true" focusable="false" width="10" height="10" viewBox="0 0 10 10">
              <path d="M8 1L2 5L8 9" stroke="currentColor" stroke-width="1.5" fill="none"/>
            </svg>
            <span>{{ 'general.pagination.previous' | t }}</span>
          </a>
        </li>
      {%- else -%}
        <li class="pagination__item">
          <span class="pagination__link pagination__link--prev pagination__link--disabled" 
                aria-disabled="true"
                aria-label="{{ 'general.pagination.previous' | t }}">
            <svg aria-hidden="true" focusable="false" width="10" height="10" viewBox="0 0 10 10">
              <path d="M8 1L2 5L8 9" stroke="currentColor" stroke-width="1.5" fill="none"/>
            </svg>
            <span>{{ 'general.pagination.previous' | t }}</span>
          </span>
        </li>
      {%- endif -%}

      {%- comment -%} Numéros de page {%- endcomment -%}
      {%- for part in paginate.parts -%}
        <li class="pagination__item pagination__item--number">
          {%- if part.is_link -%}
            <a href="{{ part.url }}{{ anchor }}" 
               class="pagination__link"
               aria-label="{{ 'general.pagination.page' | t: number: part.title }}">
              {{ part.title }}
            </a>
          {%- else -%}
            {%- if part.title == paginate.current_page -%}
              <span class="pagination__link pagination__link--current" 
                    aria-current="page"
                    aria-label="{{ 'general.pagination.page' | t: number: part.title }}">
                {{ part.title }}
              </span>
            {%- else -%}
              <span class="pagination__link pagination__link--ellipsis" aria-hidden="true">
                {{ part.title }}
              </span>
            {%- endif -%}
          {%- endif -%}
        </li>
      {%- endfor -%}

      {%- comment -%} Bouton Suivant {%- endcomment -%}
      {%- if paginate.next -%}
        <li class="pagination__item">
          <a href="{{ paginate.next.url }}{{ anchor }}" 
             class="pagination__link pagination__link--next"
             aria-label="{{ 'general.pagination.next' | t }}">
            <span>{{ 'general.pagination.next' | t }}</span>
            <svg aria-hidden="true" focusable="false" width="10" height="10" viewBox="0 0 10 10">
              <path d="M2 1L8 5L2 9" stroke="currentColor" stroke-width="1.5" fill="none"/>
            </svg>
          </a>
        </li>
      {%- else -%}
        <li class="pagination__item">
          <span class="pagination__link pagination__link--next pagination__link--disabled" 
                aria-disabled="true"
                aria-label="{{ 'general.pagination.next' | t }}">
            <span>{{ 'general.pagination.next' | t }}</span>
            <svg aria-hidden="true" focusable="false" width="10" height="10" viewBox="0 0 10 10">
              <path d="M2 1L8 5L2 9" stroke="currentColor" stroke-width="1.5" fill="none"/>
            </svg>
          </span>
        </li>
      {%- endif -%}
    </ul>

    {%- comment -%} Info de pagination {%- endcomment -%}
    <div class="pagination__info">
      {{ 'general.pagination.showing_items' | t: 
         first: paginate.current_offset | plus: 1, 
         last: paginate.current_offset | plus: paginate.page_size | at_most: paginate.items, 
         total: paginate.items 
      }}
    </div>
  </nav>
{%- endif -%}

<style>
  .pagination {
    margin-top: 48px;
    padding-top: 32px;
    border-top: 1px solid rgba(var(--foreground-color), 0.1);
  }

  .pagination__list {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    list-style: none;
    padding: 0;
    margin: 0 0 16px 0;
    flex-wrap: wrap;
  }

  .pagination__item--number {
    display: none;
  }

  .pagination__link {
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 44px;
    height: 44px;
    padding: 0 12px;
    border: 1px solid rgba(var(--foreground-color), 0.15);
    border-radius: 4px;
    color: rgb(var(--foreground-color));
    text-decoration: none;
    font-size: 14px;
    font-weight: 500;
    transition: all 0.2s ease;
    gap: 8px;
  }

  .pagination__link:hover:not(.pagination__link--disabled):not(.pagination__link--current) {
    background: rgb(var(--foreground-color));
    color: rgb(var(--background-color));
    border-color: rgb(var(--foreground-color));
  }

  .pagination__link--current {
    background: rgb(var(--foreground-color));
    color: rgb(var(--background-color));
    border-color: rgb(var(--foreground-color));
    cursor: default;
  }

  .pagination__link--disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }

  .pagination__link--ellipsis {
    border: none;
    cursor: default;
  }

  .pagination__info {
    text-align: center;
    font-size: 14px;
    color: rgba(var(--foreground-color), 0.65);
  }

  @media (min-width: 750px) {
    .pagination__item--number {
      display: block;
    }

    .pagination__link--prev span,
    .pagination__link--next span {
      display: inline;
    }
  }

  @media (max-width: 749px) {
    .pagination__link--prev span,
    .pagination__link--next span {
      position: absolute;
      width: 1px;
      height: 1px;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
    }
  }
</style>
