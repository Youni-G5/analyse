{% comment %}
  Meta Tags Snippet - SEO Optimisé
  
  Inclut:
  - Balises Open Graph complètes
  - Twitter Cards
  - JSON-LD Schema.org
  - Meta robots et directives SEO
  - Canonical URLs
  - Hreflang pour multilingue
{% endcomment %}

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1">

{%- liquid
  assign og_title = page_title | default: shop.name
  assign og_url = canonical_url | default: request.origin
  assign og_type = 'website'
  assign og_description = page_description | default: shop.description | default: shop.name

  if request.page_type == 'product'
    assign og_type = 'product'
  elsif request.page_type == 'article'
    assign og_type = 'article'
  elsif request.page_type == 'password'
    assign og_url = request.origin
  endif
%}

{% comment %} ========== TITLE TAG ========== {% endcomment %}
<title>
  {{ page_title }}
  {%- if current_tags %} &ndash; étiqueté "{{ current_tags | join: ', ' }}"{% endif -%}
  {%- if current_page != 1 %} &ndash; Page {{ current_page }}{% endif -%}
  {%- unless page_title contains shop.name %} &ndash; {{ shop.name }}{% endunless -%}
</title>

{% comment %} ========== META DESCRIPTION ========== {% endcomment %}
{% if page_description %}
  <meta name="description" content="{{ page_description | escape }}">
{% elsif shop.description %}
  <meta name="description" content="{{ shop.description | escape }}">
{% endif %}

{% comment %} ========== CANONICAL URL ========== {% endcomment %}
<link rel="canonical" href="{{ canonical_url }}">

{% comment %} ========== ROBOTS META ========== {% endcomment %}
{% if settings.password_page_enabled or request.page_type == 'password' %}
  <meta name="robots" content="noindex, nofollow">
{% elsif current_tags %}
  <meta name="robots" content="noindex, follow">
{% elsif current_page != 1 %}
  <meta name="robots" content="noindex, follow">
{% else %}
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
{% endif %}

{% comment %} ========== GOOGLE SITE VERIFICATION ========== {% endcomment %}
{% comment %} Ajoutez votre code de vérification Google Search Console si nécessaire {% endcomment %}
{% comment %} <meta name="google-site-verification" content="YOUR_VERIFICATION_CODE"> {% endcomment %}

{% comment %} ========== OPEN GRAPH TAGS ========== {% endcomment %}
<meta property="og:site_name" content="{{ shop.name }}">
<meta property="og:url" content="{{ og_url }}">
<meta property="og:title" content="{{ og_title | escape }}">
<meta property="og:type" content="{{ og_type }}">
<meta property="og:description" content="{{ og_description | escape }}">
<meta property="og:locale" content="{{ request.locale.iso_code }}">

{% if shop.locale == 'fr' %}
  <meta property="og:locale:alternate" content="en_US">
  <meta property="og:locale:alternate" content="de_DE">
{% endif %}

{%- if page_image -%}
  <meta property="og:image" content="https:{{ page_image | image_url: width: 1200 }}">
  <meta property="og:image:secure_url" content="https:{{ page_image | image_url: width: 1200 }}">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="{{ page_image.alt | escape }}">
{%- endif -%}

{% comment %} ========== PRODUCT SPECIFIC OG TAGS ========== {% endcomment %}
{%- if request.page_type == 'product' -%}
  <meta property="og:price:amount" content="{{ product.price | money_without_currency | strip_html }}">
  <meta property="og:price:currency" content="{{ cart.currency.iso_code }}">
  <meta property="product:price:amount" content="{{ product.price | money_without_currency }}">
  <meta property="product:price:currency" content="{{ cart.currency.iso_code }}">
  
  {% if product.available %}
    <meta property="product:availability" content="in stock">
  {% else %}
    <meta property="product:availability" content="out of stock">
  {% endif %}
  
  <meta property="product:condition" content="new">
  <meta property="product:retailer_item_id" content="{{ product.id }}">
  
  {% if product.vendor != blank %}
    <meta property="product:brand" content="{{ product.vendor | escape }}">
  {% endif %}
{%- endif -%}

{% comment %} ========== ARTICLE SPECIFIC OG TAGS ========== {% endcomment %}
{%- if request.page_type == 'article' -%}
  <meta property="article:published_time" content="{{ article.published_at | date: '%Y-%m-%dT%H:%M:%SZ' }}">
  <meta property="article:modified_time" content="{{ article.updated_at | date: '%Y-%m-%dT%H:%M:%SZ' }}">
  <meta property="article:author" content="{{ article.author }}">
  
  {% for tag in article.tags %}
    <meta property="article:tag" content="{{ tag }}">
  {% endfor %}
{%- endif -%}

{% comment %} ========== TWITTER CARDS ========== {% endcomment %}
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ og_title | escape }}">
<meta name="twitter:description" content="{{ og_description | escape }}">

{%- if page_image -%}
  <meta name="twitter:image" content="https:{{ page_image | image_url: width: 1200 }}">
  <meta name="twitter:image:alt" content="{{ page_image.alt | escape }}">
{%- endif -%}

{% comment %} Ajoutez votre handle Twitter si nécessaire {% endcomment %}
{% if settings.social_x_link != blank %}
  {% assign twitter_handle = settings.social_x_link | split: 'x.com/' | last | split: '/' | first %}
  <meta name="twitter:site" content="@{{ twitter_handle }}">
  <meta name="twitter:creator" content="@{{ twitter_handle }}">
{% endif %}

{% comment %} ========== FACEBOOK DOMAIN VERIFICATION ========== {% endcomment %}
{% comment %} Ajoutez votre code de vérification Facebook si nécessaire {% endcomment %}
{% comment %} <meta name="facebook-domain-verification" content="YOUR_VERIFICATION_CODE"> {% endcomment %}

{% comment %} ========== HREFLANG TAGS (Multilingue) ========== {% endcomment %}
{% if shop.published_locales.size > 1 %}
  {% for locale in shop.published_locales %}
    <link rel="alternate" hreflang="{{ locale.iso_code }}" href="{{ canonical_url | replace: request.locale.root_url, locale.root_url }}">
  {% endfor %}
  <link rel="alternate" hreflang="x-default" href="{{ canonical_url }}">
{% endif %}

{% comment %} ========== MOBILE APP TAGS ========== {% endcomment %}
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="{{ shop.name }}">
<meta name="format-detection" content="telephone=no">

{% comment %} ========== THEME COLOR ========== {% endcomment %}
<meta name="theme-color" content="{{ settings.background_color }}">
<meta name="msapplication-navbutton-color" content="{{ settings.background_color }}">
<meta name="apple-mobile-web-app-status-bar-style" content="{{ settings.background_color }}">

{% comment %} ========== AUTHOR & COPYRIGHT ========== {% endcomment %}
<meta name="author" content="{{ shop.name }}">
<meta name="copyright" content="&copy; {{ 'now' | date: '%Y' }} {{ shop.name }}. Tous droits réservés.">

{% comment %} ========== ADDITIONAL SEO TAGS ========== {% endcomment %}
<meta name="rating" content="General">
<meta name="revisit-after" content="7 days">

{% comment %} Géo-localisation si applicable {% endcomment %}
{% comment %}
<meta name="geo.region" content="FR-IDF">
<meta name="geo.placename" content="Paris">
<meta name="geo.position" content="48.856614;2.352222">
<meta name="ICBM" content="48.856614, 2.352222">
{% endcomment %}